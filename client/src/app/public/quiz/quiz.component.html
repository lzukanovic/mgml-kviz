<div class="container-fluid d-flex flex-column pt-5 pb-1" style="height: 100vh">
  <div class="row flex-grow-1 justify-content-center">
    <div class="col-10 col-sm-8 col-md-6 col-lg-5 col-xxl-4">
      <div class="card">
        <div class="card-body">
          <form [formGroup]="form" (ngSubmit)="submit()" class="d-flex flex-column align-items-stretch" novalidate>
            <img src="/assets/logo-mgml-color.svg" class="mx-auto" alt="MGML logo">

            <h4 class="mb-3">Vprašanje</h4>
            <ng-container *ngIf="question">
              <p class="mb-1">{{question.title}}</p>
              <p *ngIf="question.description as description" class="mb-3 text-muted small">{{description}}</p>

              <div class="mb-5" *ngIf="answersForm.controls.length">
                <div class="form-check" *ngFor="let answer of answersForm.controls; let i = index">
                  <input
                    class="form-check-input"
                    [type]="question.type === 'singleChoice' ? 'radio' : 'checkbox'"
                    name="answer"
                    [id]="'answer' + answer.get('id')?.value"
                    [formControl]="getAnswerSelect(i)"
                  >
                  <label class="form-check-label" [for]="'answer' + answer.get('id')?.value">
                    {{answer.get('text')?.value}}
                  </label>
                </div>
                <div *ngIf="!hasAnswered" class="invalid-feedback" [class.d-block]="form.invalid">
                  <span *ngIf="question.type === 'singleChoice'">Izbira odgovora je obvezna.</span>
                  <span *ngIf="question.type === 'multipleChoice'">Izbira vsaj enga odgovora je obvezna.</span>
                </div>
                <span *ngIf="hasAnswered" class="invalid-feedback d-block mt-1">Na to vprašanje ste že odgovorili.</span>
              </div>
              <button type="submit" class="btn btn-secondary w-100 mb-2" *ngIf="hasAnswered" routerLink="./statistics">Ogled statistike</button>
              <button type="submit" class="btn btn-primary w-100" [disabled]="form.invalid || hasAnswered">Odgovori</button>
            </ng-container>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
